(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},21854,e=>{"use strict";var t=e.i(47167);function r(){return t.default.env.NEXT_PUBLIC_APPSTORE_URL||"https://apps.apple.com"}function a(){return t.default.env.NEXT_PUBLIC_PLAYSTORE_URL||"https://play.google.com/store/apps"}function s(){return t.default.env.NEXT_PUBLIC_API_BASE_URL||"https://api.nine20.net"}function i(e){return e.toLowerCase().includes("android")?"playstore":"appstore"}e.s(["getAppStoreUrl",()=>r,"getPlayStoreUrl",()=>a,"getPreferredStoreByUserAgent",()=>i,"getSajuApiBaseUrl",()=>s])},53555,e=>{"use strict";var t=e.i(43476),r=e.i(71645);class a extends Error{status;type;constructor(e,t,r="http"){super(e),this.status=t,this.type=r}}function s(e,t){let r=e.endsWith("/")?e.slice(0,-1):e;return`${r}${t}`}async function i(e){try{return(await fetch(s(e,"/"),{method:"GET",cache:"no-store"})).ok}catch{return!1}}async function n(e,t){let r;try{let a=new URLSearchParams({lang:t}).toString();r=await fetch(s(e,`/api/v1/saju/birthplace-presets?${a}`),{method:"GET",cache:"no-store",headers:{"Accept-Language":t}})}catch{throw new a("Network error while loading birthplace presets.",void 0,"network")}if(!r.ok)throw new a(`Failed to load birthplace presets (${r.status}).`,r.status,"http");try{return await r.json()}catch{throw new a("Invalid birthplace presets payload.",r.status,"invalid_response")}}async function l(e,t,r){let i;try{i=await fetch(s(e,"/api/v1/saju/preview"),{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":r},body:JSON.stringify(t)})}catch{throw new a("Network error while requesting saju preview.",void 0,"network")}if(!i.ok){let e=`Request failed with status ${i.status}.`;try{let t=await i.json();t?.detail&&(e=t.detail)}catch{}throw new a(e,i.status,"http")}try{return await i.json()}catch{throw new a("Invalid response payload.",i.status,"invalid_response")}}var o=e.i(21854);function u(e,t,r){return e||t?e&&t?`${e} (${t})`:e||t||r||"":r??""}function d({dict:e,lang:s}){let[d,c]=(0,r.useState)("checking"),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[b,j]=(0,r.useState)(null),[y,g]=(0,r.useState)([]),[v,f]=(0,r.useState)(30),[w,P]=(0,r.useState)(()=>({birthYear:"",birthMonth:"",birthDay:"",birthplaceKey:"",gender:"M",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Asia/Seoul",latitude:null,longitude:null,isLunar:!1,isLeapMonth:!1,birthHour:"",birthMinute:""})),N=(0,r.useCallback)(async()=>{c("checking");let e=(0,o.getSajuApiBaseUrl)();if(!await i(e))return void c("unavailable");try{let t=(await n(e,s)).presets??[];if(0===t.length){c("unavailable"),g([]);return}g(t),P(e=>{let r=t.find(t=>t.key===e.birthplaceKey)??t.find(t=>t.timezone===e.timezone)??t.find(e=>e.is_recommended)??t[0];return r?{...e,birthplaceKey:r.key,timezone:r.timezone,latitude:r.latitude,longitude:r.longitude}:e}),c("available")}catch{g([]),c("unavailable")}},[s]);(0,r.useEffect)(()=>{N()},[N]),(0,r.useEffect)(()=>{if("unavailable"!==d)return;f(30);let e=setInterval(()=>{f(e=>e<=1?(N(),30):e-1)},1e3);return()=>clearInterval(e)},[d,N]);let k=(0,r.useMemo)(()=>b?.ohaeng_summary?[{key:"mok",label:e.sajuPreview.result.mok,value:b.ohaeng_summary.mok??0},{key:"hwa",label:e.sajuPreview.result.hwa,value:b.ohaeng_summary.hwa??0},{key:"to",label:e.sajuPreview.result.to,value:b.ohaeng_summary.to??0},{key:"geum",label:e.sajuPreview.result.geum,value:b.ohaeng_summary.geum??0},{key:"su",label:e.sajuPreview.result.su,value:b.ohaeng_summary.su??0}]:[],[e,b]),_=async t=>{if(t.preventDefault(),!w.birthYear||!w.birthMonth||!w.birthDay||!w.birthplaceKey||!w.gender||!w.timezone)return void x(e.sajuPreview.errors.required);x(""),h(!0);try{let e=await l((0,o.getSajuApiBaseUrl)(),{birth_year:Number(w.birthYear),birth_month:Number(w.birthMonth),birth_day:Number(w.birthDay),gender:w.gender,timezone:w.timezone,latitude:w.latitude,longitude:w.longitude,is_lunar:w.isLunar,is_leap_month:w.isLeapMonth,birth_hour:w.birthHour?Number(w.birthHour):null,birth_minute:w.birthMinute?Number(w.birthMinute):null},s);j(e)}catch(t){if(j(null),t instanceof a&&("http"!==t.type||429===t.status||(t.status??0)>=500))return void c("unavailable");x(e.sajuPreview.errors.requestFailed)}finally{h(!1)}};return"checking"===d?(0,t.jsx)("div",{className:"rounded-2xl border border-border/60 bg-midnight/50 p-8 text-text-secondary",children:e.sajuPreview.status.checking}):"unavailable"===d?(0,t.jsxs)("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-400/10 p-8 text-amber-100",children:[(0,t.jsx)("p",{children:e.sajuPreview.status.unavailable}),(0,t.jsx)("button",{type:"button",onClick:()=>void N(),className:"mt-4 inline-flex rounded-full border border-amber-200/50 px-4 py-2 text-sm font-medium hover:bg-amber-200/10",children:e.sajuPreview.status.retry}),(0,t.jsxs)("p",{className:"mt-3 text-xs text-amber-200/80",children:[e.sajuPreview.status.autoRetryPrefix," ",v,e.sajuPreview.status.autoRetrySuffix]})]}):(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("form",{onSubmit:_,className:"rounded-2xl border border-border/60 bg-midnight/50 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:e.sajuPreview.form.title}),(0,t.jsx)("p",{className:"mt-2 text-sm text-text-secondary",children:e.sajuPreview.form.description}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthYear,(0,t.jsx)("input",{value:w.birthYear,onChange:e=>P(t=>({...t,birthYear:e.target.value})),required:!0,type:"number",min:1900,max:2100,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthMonth,(0,t.jsx)("input",{value:w.birthMonth,onChange:e=>P(t=>({...t,birthMonth:e.target.value})),required:!0,type:"number",min:1,max:12,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthDay,(0,t.jsx)("input",{value:w.birthDay,onChange:e=>P(t=>({...t,birthDay:e.target.value})),required:!0,type:"number",min:1,max:31,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.gender,(0,t.jsxs)("select",{value:w.gender,onChange:e=>P(t=>({...t,gender:e.target.value})),className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple",children:[(0,t.jsx)("option",{value:"M",children:e.sajuPreview.form.genderMale}),(0,t.jsx)("option",{value:"F",children:e.sajuPreview.form.genderFemale})]})]})]}),(0,t.jsxs)("label",{className:"mt-4 block text-sm text-text-secondary",children:[e.sajuPreview.form.timezone,(0,t.jsxs)("select",{value:w.birthplaceKey,onChange:e=>{let t=y.find(t=>t.key===e.target.value);t&&P(e=>({...e,birthplaceKey:t.key,timezone:t.timezone,latitude:t.latitude,longitude:t.longitude}))},required:!0,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:e.sajuPreview.form.timezone}),y.map(e=>(0,t.jsxs)("option",{value:e.key,children:[e.display_name," (",e.timezone,")"]},e.key))]})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthHour,(0,t.jsx)("input",{value:w.birthHour,onChange:e=>P(t=>({...t,birthHour:e.target.value})),type:"number",min:0,max:23,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthMinute,(0,t.jsx)("input",{value:w.birthMinute,onChange:e=>P(t=>({...t,birthMinute:e.target.value})),type:"number",min:0,max:59,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,t.jsx)("input",{checked:w.isLunar,onChange:e=>P(t=>({...t,isLunar:e.target.checked})),type:"checkbox"}),e.sajuPreview.form.isLunar]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,t.jsx)("input",{checked:w.isLeapMonth,onChange:e=>P(t=>({...t,isLeapMonth:e.target.checked})),type:"checkbox"}),e.sajuPreview.form.isLeapMonth]})]}),p?(0,t.jsx)("p",{className:"mt-4 text-sm text-red-300",children:p}):null,(0,t.jsx)("button",{disabled:m,type:"submit",className:"mt-6 inline-flex rounded-full bg-gradient-to-r from-neon-purple to-neon-blue px-6 py-3 text-sm font-semibold text-white disabled:opacity-60",children:m?e.sajuPreview.form.submitting:e.sajuPreview.form.submit})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-border/60 bg-midnight/50 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:e.sajuPreview.result.title}),b?(0,t.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-text-secondary",children:[(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.animal,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:b.animal})]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.gender,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:b.gender})]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.birthInfo,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:b.birth_info?.solar?`${b.birth_info.solar.year}-${b.birth_info.solar.month}-${b.birth_info.solar.day}`:e.sajuPreview.result.none})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-text-muted",children:e.sajuPreview.result.pillars}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1 text-text-primary",children:[(0,t.jsxs)("li",{children:[e.sajuPreview.result.year,":"," ",u(b.pillars.year?.name,b.pillars.year?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.month,":"," ",u(b.pillars.month?.name,b.pillars.month?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.day,":"," ",u(b.pillars.day?.name,b.pillars.day?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.hour,":"," ",u(b.pillars.hour?.name,b.pillars.hour?.hanja,e.sajuPreview.result.none)]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-text-muted",children:e.sajuPreview.result.ohaeng}),(0,t.jsx)("ul",{className:"mt-2 grid grid-cols-2 gap-2 text-text-primary",children:k.map(e=>(0,t.jsxs)("li",{children:[e.label,": ",e.value]},e.key))})]})]}):(0,t.jsx)("p",{className:"mt-4 text-sm text-text-secondary",children:e.sajuPreview.form.submit})]})]})}e.s(["default",()=>d],53555)}]);