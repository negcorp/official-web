(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},21854,e=>{"use strict";var t=e.i(47167);function r(){return t.default.env.NEXT_PUBLIC_APPSTORE_URL||"https://apps.apple.com"}function a(){return t.default.env.NEXT_PUBLIC_PLAYSTORE_URL||"https://play.google.com/store/apps"}function s(){return t.default.env.NEXT_PUBLIC_API_BASE_URL||"https://api.nine20.net"}function n(e){return e.toLowerCase().includes("android")?"playstore":"appstore"}e.s(["getAppStoreUrl",()=>r,"getPlayStoreUrl",()=>a,"getPreferredStoreByUserAgent",()=>n,"getSajuApiBaseUrl",()=>s])},53555,e=>{"use strict";var t=e.i(43476),r=e.i(71645);class a extends Error{status;type;constructor(e,t,r="http"){super(e),this.status=t,this.type=r}}function s(e,t){let r=e.endsWith("/")?e.slice(0,-1):e;return`${r}${t}`}async function n(e){try{return(await fetch(s(e,"/"),{method:"GET",cache:"no-store"})).ok}catch{return!1}}async function i(e,t,r){let n;try{n=await fetch(s(e,"/api/v1/saju/preview"),{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":r},body:JSON.stringify(t)})}catch{throw new a("Network error while requesting saju preview.",void 0,"network")}if(!n.ok){let e=`Request failed with status ${n.status}.`;try{let t=await n.json();t?.detail&&(e=t.detail)}catch{}throw new a(e,n.status,"http")}try{return await n.json()}catch{throw new a("Invalid response payload.",n.status,"invalid_response")}}var l=e.i(21854);function o(e,t,r){return e||t?e&&t?`${e} (${t})`:e||t||r||"":r??""}function u({dict:e,lang:s}){let[u,d]=(0,r.useState)("checking"),[m,c]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(null),[j,v]=(0,r.useState)(30),[y,g]=(0,r.useState)(()=>({birthYear:"",birthMonth:"",birthDay:"",gender:"M",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Asia/Seoul",isLunar:!1,isLeapMonth:!1,birthHour:"",birthMinute:""})),f=(0,r.useCallback)(async()=>{d("checking"),d(await n((0,l.getSajuApiBaseUrl)())?"available":"unavailable")},[]);(0,r.useEffect)(()=>{f()},[f]),(0,r.useEffect)(()=>{if("unavailable"!==u)return;v(30);let e=setInterval(()=>{v(e=>e<=1?(f(),30):e-1)},1e3);return()=>clearInterval(e)},[u,f]);let w=(0,r.useMemo)(()=>p?.ohaeng_summary?[{key:"mok",label:e.sajuPreview.result.mok,value:p.ohaeng_summary.mok??0},{key:"hwa",label:e.sajuPreview.result.hwa,value:p.ohaeng_summary.hwa??0},{key:"to",label:e.sajuPreview.result.to,value:p.ohaeng_summary.to??0},{key:"geum",label:e.sajuPreview.result.geum,value:p.ohaeng_summary.geum??0},{key:"su",label:e.sajuPreview.result.su,value:p.ohaeng_summary.su??0}]:[],[e,p]),P=async t=>{if(t.preventDefault(),!y.birthYear||!y.birthMonth||!y.birthDay||!y.gender||!y.timezone)return void h(e.sajuPreview.errors.required);h(""),c(!0);try{let e=await i((0,l.getSajuApiBaseUrl)(),{birth_year:Number(y.birthYear),birth_month:Number(y.birthMonth),birth_day:Number(y.birthDay),gender:y.gender,timezone:y.timezone,is_lunar:y.isLunar,is_leap_month:y.isLeapMonth,birth_hour:y.birthHour?Number(y.birthHour):null,birth_minute:y.birthMinute?Number(y.birthMinute):null},s);b(e)}catch(t){if(b(null),t instanceof a&&("http"!==t.type||429===t.status||(t.status??0)>=500))return void d("unavailable");h(e.sajuPreview.errors.requestFailed)}finally{c(!1)}};return"checking"===u?(0,t.jsx)("div",{className:"rounded-2xl border border-border/60 bg-midnight/50 p-8 text-text-secondary",children:e.sajuPreview.status.checking}):"unavailable"===u?(0,t.jsxs)("div",{className:"rounded-2xl border border-amber-400/40 bg-amber-400/10 p-8 text-amber-100",children:[(0,t.jsx)("p",{children:e.sajuPreview.status.unavailable}),(0,t.jsx)("button",{type:"button",onClick:()=>void f(),className:"mt-4 inline-flex rounded-full border border-amber-200/50 px-4 py-2 text-sm font-medium hover:bg-amber-200/10",children:e.sajuPreview.status.retry}),(0,t.jsxs)("p",{className:"mt-3 text-xs text-amber-200/80",children:[e.sajuPreview.status.autoRetryPrefix," ",j,e.sajuPreview.status.autoRetrySuffix]})]}):(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("form",{onSubmit:P,className:"rounded-2xl border border-border/60 bg-midnight/50 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:e.sajuPreview.form.title}),(0,t.jsx)("p",{className:"mt-2 text-sm text-text-secondary",children:e.sajuPreview.form.description}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthYear,(0,t.jsx)("input",{value:y.birthYear,onChange:e=>g(t=>({...t,birthYear:e.target.value})),required:!0,type:"number",min:1900,max:2100,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthMonth,(0,t.jsx)("input",{value:y.birthMonth,onChange:e=>g(t=>({...t,birthMonth:e.target.value})),required:!0,type:"number",min:1,max:12,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthDay,(0,t.jsx)("input",{value:y.birthDay,onChange:e=>g(t=>({...t,birthDay:e.target.value})),required:!0,type:"number",min:1,max:31,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.gender,(0,t.jsxs)("select",{value:y.gender,onChange:e=>g(t=>({...t,gender:e.target.value})),className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple",children:[(0,t.jsx)("option",{value:"M",children:e.sajuPreview.form.genderMale}),(0,t.jsx)("option",{value:"F",children:e.sajuPreview.form.genderFemale})]})]})]}),(0,t.jsxs)("label",{className:"mt-4 block text-sm text-text-secondary",children:[e.sajuPreview.form.timezone,(0,t.jsx)("input",{value:y.timezone,onChange:e=>g(t=>({...t,timezone:e.target.value})),required:!0,list:"timezone-options",className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"}),(0,t.jsxs)("datalist",{id:"timezone-options",children:[(0,t.jsx)("option",{value:"Asia/Seoul"}),(0,t.jsx)("option",{value:"Asia/Tokyo"}),(0,t.jsx)("option",{value:"America/Los_Angeles"}),(0,t.jsx)("option",{value:"America/New_York"}),(0,t.jsx)("option",{value:"Europe/London"})]}),(0,t.jsx)("span",{className:"mt-1 block text-xs text-text-muted",children:e.sajuPreview.form.hint})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthHour,(0,t.jsx)("input",{value:y.birthHour,onChange:e=>g(t=>({...t,birthHour:e.target.value})),type:"number",min:0,max:23,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]}),(0,t.jsxs)("label",{className:"text-sm text-text-secondary",children:[e.sajuPreview.form.birthMinute,(0,t.jsx)("input",{value:y.birthMinute,onChange:e=>g(t=>({...t,birthMinute:e.target.value})),type:"number",min:0,max:59,className:"mt-1 w-full rounded-lg border border-border bg-black/20 px-3 py-2 text-text-primary outline-none focus:border-neon-purple"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,t.jsx)("input",{checked:y.isLunar,onChange:e=>g(t=>({...t,isLunar:e.target.checked})),type:"checkbox"}),e.sajuPreview.form.isLunar]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,t.jsx)("input",{checked:y.isLeapMonth,onChange:e=>g(t=>({...t,isLeapMonth:e.target.checked})),type:"checkbox"}),e.sajuPreview.form.isLeapMonth]})]}),x?(0,t.jsx)("p",{className:"mt-4 text-sm text-red-300",children:x}):null,(0,t.jsx)("button",{disabled:m,type:"submit",className:"mt-6 inline-flex rounded-full bg-gradient-to-r from-neon-purple to-neon-blue px-6 py-3 text-sm font-semibold text-white disabled:opacity-60",children:m?e.sajuPreview.form.submitting:e.sajuPreview.form.submit})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-border/60 bg-midnight/50 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:e.sajuPreview.result.title}),p?(0,t.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-text-secondary",children:[(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.animal,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:p.animal})]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.gender,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:p.gender})]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-text-muted",children:[e.sajuPreview.result.birthInfo,":"]})," ",(0,t.jsx)("span",{className:"text-text-primary",children:p.birth_info?.solar?`${p.birth_info.solar.year}-${p.birth_info.solar.month}-${p.birth_info.solar.day}`:e.sajuPreview.result.none})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-text-muted",children:e.sajuPreview.result.pillars}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1 text-text-primary",children:[(0,t.jsxs)("li",{children:[e.sajuPreview.result.year,":"," ",o(p.pillars.year?.name,p.pillars.year?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.month,":"," ",o(p.pillars.month?.name,p.pillars.month?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.day,":"," ",o(p.pillars.day?.name,p.pillars.day?.hanja,e.sajuPreview.result.none)]}),(0,t.jsxs)("li",{children:[e.sajuPreview.result.hour,":"," ",o(p.pillars.hour?.name,p.pillars.hour?.hanja,e.sajuPreview.result.none)]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-text-muted",children:e.sajuPreview.result.ohaeng}),(0,t.jsx)("ul",{className:"mt-2 grid grid-cols-2 gap-2 text-text-primary",children:w.map(e=>(0,t.jsxs)("li",{children:[e.label,": ",e.value]},e.key))})]})]}):(0,t.jsx)("p",{className:"mt-4 text-sm text-text-secondary",children:e.sajuPreview.form.submit})]})]})}e.s(["default",()=>u],53555)}]);